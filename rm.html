<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Reorder & Merge</title>
    <meta name="description" content="DocuWrite Pro is an all-in-one online workspace that lets you write, edit, convert, design, and manage documents and digital content instantly—no installation, no complexity.">
  <meta name="keywords" content="DocuWrite Pro, Mohtadi Azad Mahi, AI writer, document editor, online text tool, GitHub project, DocuWritePro, Document Editor, Document, Editor, PDF, JPG, Edit, Text, Change File Type, File Changer, Format, Format Changer, Office, Docs, A4, Editor, General document editing, Collab, Editing documents together, Document Viewer, Viewing documents, Word Finder, Searching for specific words, Translator, Language translation, Document Signer, Electronically signing documents, Page Number Adder, Adding page numbers to documents, Chart Maker, Creating data charts, Table Maker, Creating tables, Watermark Adder, Adding watermarks to files, Email Writer, Assisting with writing emails, Spell Checker, Checking spelling and grammar, File Extractor, Extracting contents from files, QR Maker, Creating QR codes, ID Card Maker, Designing and creating ID cards, File Zipper, Compressing or zipping files, PDF Converter, Converting files to or from PDF format, Context Field, Analyzing text (e.g., word count, frequency), Gift Card Maker, Creating custom gift cards, Share File, Uploading or sharing a file, Text Extractor, Extracting text from sources (e.g., images), Keyboard Click Test, Testing keyboard functionality, Frontend IDE, Integrated Development Environment for frontend coding, HTML Editor, Editing HTML code, HTML Writer, Writing or generating HTML content, Button Designer, Designing user interface buttons, HTML Splitter, Splitting HTML files or elements, GoTo Code, Navigation feature in an IDE/editor, Code Snipper, Storing or managing code snippets, Image Editor, Editing images, Image Generator, Generating new images, Drawing Board, A simple drawing or sketching tool, HTML, CSS, JS, Online, Fast, Easy, No login, No signup, Free, No credit card required, Mohtadi, Azad, Mahi, Mohtadi Azad, Mohtadi Azad Mahi, mahi902">
  <meta name="author" content="Mohtadi Azad Mahi">
  <meta name="robots" content="index, follow">

  <!-- Favicon & App Icons -->
  <link rel="icon" type="image/png" sizes="16x16" href="https://i.ibb.co.com/k2QvnvMz/IMG-20251010-111934.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co.com/k2QvnvMz/IMG-20251010-111934.jpg">
  <link rel="icon" type="image/png" sizes="192x192" href="https://i.ibb.co.com/k2QvnvMz/IMG-20251010-111934.jpg">
  <link rel="apple-touch-icon" href="https://i.ibb.co.com/k2QvnvMz/IMG-20251010-111934.jpg">
  <meta name="theme-color" content="#ffffff">

  <!-- App & Brand Metadata -->
  <meta property="og:site_name" content="DocuWrite Pro">
  <meta name="application-name" content="DocuWrite Pro">
  <meta name="apple-mobile-web-app-title" content="DocuWrite Pro">

  <!-- Open Graph -->
  <meta property="og:title" content="DocuWrite Pro — Online Document Editor">
  <meta property="og:description" content="Edit, format, and export documents easily with DocuWrite Pro by Mohtadi Azad Mahi.">
  <meta property="og:url" content="https://mahi902.github.io/DocuWritePro/">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://i.ibb.co.com/k2QvnvMz/IMG-20251010-111934.jpg">

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="DocuWrite Pro — Online Document Editor">
  <meta name="twitter:description" content="Create, format, and export documents easily with DocuWrite Pro. Built by Mohtadi Azad Mahi.">
  <meta name="twitter:image" content="https://i.ibb.co.com/k2QvnvMz/IMG-20251010-111934.jpg">

  <!-- Structured Data (Google Knowledge Graph) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "DocuWrite Pro",
    "alternateName": "DocuWrite Pro — Online Document Editor",
    "url": "https://mahi902.github.io/DocuWritePro/",
    "creator": {
      "@type": "Person",
      "name": "Mohtadi Azad Mahi"
    }
  }
  </script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0" />

    <!-- PDF Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        /* Animations */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .spin { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* Page Selection Styles */
        .page-card {
            transition: all 0.2s ease;
        }
        .page-card:hover .hover-actions {
            opacity: 1;
        }
        .page-card.selected {
            border-color: #4f46e5; /* Indigo 600 */
            background-color: #eef2ff;
            transform: scale(0.98);
        }
        .selection-badge {
            transform: scale(0);
            transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .page-card.selected .selection-badge {
            transform: scale(1);
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans h-screen flex flex-col overflow-hidden selection:bg-indigo-100 selection:text-indigo-700">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center shadow-sm z-10">
        <div class="flex items-center gap-2">
            <span class="material-symbols-rounded text-indigo-600 text-3xl">layers</span>
            <h1 class="text-xl font-bold tracking-tight text-slate-700">Reorder & Merge</h1>
        </div>
        <div id="action-header" class="hidden flex items-center gap-4">
            <span class="text-sm text-slate-500 font-medium"><span id="selection-count">0</span> pages selected</span>
            <button onclick="mergePages()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-5 py-2 rounded-full shadow-md transition flex items-center gap-2 font-medium">
                <span class="material-symbols-rounded text-sm">call_merge</span>
                Merge
            </button>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-1 overflow-y-auto relative w-full max-w-6xl mx-auto p-6">
        
        <!-- VIEW 1: Upload Section -->
        <div id="upload-view" class="fade-in flex flex-col items-center justify-center h-full min-h-[400px]">
            <div class="w-full max-w-xl">
                <label for="file-input" id="drop-zone" class="group relative flex flex-col items-center justify-center w-full h-80 border-2 border-dashed border-slate-300 rounded-3xl cursor-pointer bg-white hover:bg-indigo-50 hover:border-indigo-400 transition-all duration-300 shadow-sm">
                    <div class="flex flex-col items-center justify-center pt-5 pb-6 text-center p-8">
                        <div class="bg-indigo-100 p-4 rounded-full mb-4 group-hover:scale-110 transition-transform">
                            <span class="material-symbols-rounded text-indigo-600 text-4xl">upload_file</span>
                        </div>
                        <p class="mb-2 text-xl font-semibold text-slate-700">Click or drag PDFs here</p>
                        <p class="text-sm text-slate-400">Select multiple files to begin reordering</p>
                    </div>
                    <input id="file-input" type="file" class="hidden" multiple accept="application/pdf" />
                </label>
            </div>
        </div>

        <!-- VIEW 2: Editor Section -->
        <div id="editor-view" class="hidden fade-in pb-20">
            <div id="files-container" class="space-y-8">
                <!-- File blocks generated here -->
            </div>
        </div>

        <!-- VIEW 3: Loading/Processing -->
        <div id="loading-view" class="hidden absolute inset-0 bg-white/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center fade-in">
            <div class="w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full spin mb-4"></div>
            <h2 class="text-2xl font-bold text-slate-700">Merging PDF...</h2>
            <p class="text-slate-500 mt-2">This happens locally on your device.</p>
        </div>

        <!-- VIEW 4: Success -->
        <div id="success-view" class="hidden absolute inset-0 bg-slate-50 z-40 flex flex-col items-center justify-center fade-in">
            <div class="bg-white p-8 rounded-3xl shadow-xl max-w-md w-full text-center border border-slate-100">
                <div class="bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                    <span class="material-symbols-rounded text-green-600 text-5xl">check</span>
                </div>
                <h2 class="text-2xl font-bold text-slate-800 mb-2">Merge Complete!</h2>
                <p class="text-slate-500 mb-6">Your document is ready to download.</p>
                
                <div class="text-left mb-6">
                    <label class="block text-xs font-semibold text-slate-400 uppercase mb-1 ml-1">Filename</label>
                    <div class="flex items-center border border-slate-300 rounded-xl bg-slate-50 focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-100 transition overflow-hidden">
                        <input type="text" id="filename-input" value="merged-document" class="bg-transparent border-none px-4 py-3 w-full focus:outline-none text-slate-700 font-medium">
                        <span class="pr-4 text-slate-400 font-medium">.pdf</span>
                    </div>
                </div>

                <div class="flex gap-3">
                    <button onclick="resetApp()" class="flex-1 px-4 py-3 rounded-xl border border-slate-200 text-slate-600 font-medium hover:bg-slate-50 transition">Start Over</button>
                    <button id="download-btn" class="flex-1 px-4 py-3 rounded-xl bg-indigo-600 text-white font-medium shadow-lg shadow-indigo-200 hover:bg-indigo-700 transition flex justify-center items-center gap-2">
                        <span class="material-symbols-rounded">download</span> Download
                    </button>
                </div>
            </div>
        </div>

    </main>

    <!-- Modal for Preview -->
    <dialog id="preview-modal" class="backdrop:bg-slate-900/50 bg-transparent p-0 w-full h-full max-w-none max-h-none open:flex items-center justify-center outline-none z-50">
        <div class="relative w-full h-full flex flex-col items-center justify-center p-4" onclick="closePreview(event)">
            <button class="absolute top-6 right-6 bg-white/10 hover:bg-white/20 text-white rounded-full p-3 backdrop-blur-md transition" onclick="document.getElementById('preview-modal').close()">
                <span class="material-symbols-rounded text-3xl">close</span>
            </button>
            <div class="bg-white rounded shadow-2xl overflow-auto max-w-[90vw] max-h-[90vh] flex items-center justify-center" onclick="event.stopPropagation()">
                <canvas id="preview-canvas" class="block"></canvas>
            </div>
        </div>
    </dialog>

    <script>
        // --- Configuration & State ---
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        
        const state = {
            files: [], // { id, file, pdfDocProxy }
            pages: [], // Flat list logic: handled by UI referencing fileID + pageIndex
            selectedPages: [], // Array of { fileId, pageIndex } ordered by selection
            mergedPdfBytes: null
        };

        // --- UI Elements ---
        const els = {
            uploadView: document.getElementById('upload-view'),
            editorView: document.getElementById('editor-view'),
            loadingView: document.getElementById('loading-view'),
            successView: document.getElementById('success-view'),
            dropZone: document.getElementById('drop-zone'),
            fileInput: document.getElementById('file-input'),
            filesContainer: document.getElementById('files-container'),
            actionHeader: document.getElementById('action-header'),
            selectionCount: document.getElementById('selection-count'),
            previewModal: document.getElementById('preview-modal'),
            previewCanvas: document.getElementById('preview-canvas'),
            downloadBtn: document.getElementById('download-btn'),
            filenameInput: document.getElementById('filename-input')
        };

        // --- Event Listeners ---
        els.fileInput.addEventListener('change', handleFileSelect);
        
        // Drag & Drop logic
        els.dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            els.dropZone.classList.add('border-indigo-500', 'bg-indigo-50');
        });
        els.dropZone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            els.dropZone.classList.remove('border-indigo-500', 'bg-indigo-50');
        });
        els.dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            els.dropZone.classList.remove('border-indigo-500', 'bg-indigo-50');
            if (e.dataTransfer.files.length) {
                handleFiles(e.dataTransfer.files);
            }
        });

        function handleFileSelect(e) {
            if (e.target.files.length) {
                handleFiles(e.target.files);
            }
        }

        async function handleFiles(fileList) {
            // Switch to Loading temporarily or just start processing
            els.uploadView.classList.add('hidden');
            els.editorView.classList.remove('hidden');
            els.editorView.classList.add('flex');
            els.actionHeader.classList.remove('hidden');
            els.actionHeader.classList.add('flex');

            for (const file of fileList) {
                if (file.type !== 'application/pdf') continue;
                
                const fileId = Math.random().toString(36).substr(2, 9);
                const arrayBuffer = await file.arrayBuffer();
                
                // CRITICAL FIX: Clone the buffer for PDF.js
                // PDF.js transfers the buffer to a worker, detaching the original.
                // We need to keep a valid copy (arrayBuffer) for pdf-lib merging later.
                const bufferForRender = arrayBuffer.slice(0);

                try {
                    // Pass the clone to PDF.js
                    const pdfDoc = await pdfjsLib.getDocument(bufferForRender).promise;
                    
                    state.files.push({
                        id: fileId,
                        name: file.name,
                        data: arrayBuffer, // Store the original, non-detached buffer
                        pdfDoc: pdfDoc
                    });

                    await renderFileSection(fileId, file.name, pdfDoc);
                } catch (err) {
                    console.error("Error loading PDF", err);
                    alert(`Could not load ${file.name}. It might be corrupted or password protected.`);
                }
            }
        }

        // --- Rendering Logic ---

        async function renderFileSection(fileId, fileName, pdfDoc) {
            const section = document.createElement('div');
            section.className = "bg-white rounded-2xl p-6 shadow-sm border border-slate-100 fade-in";
            
            // Header
            const header = document.createElement('div');
            header.className = "flex items-center gap-3 mb-6 pb-4 border-b border-slate-100";
            header.innerHTML = `
                <div class="bg-red-100 p-2 rounded-lg">
                    <span class="material-symbols-rounded text-red-500">picture_as_pdf</span>
                </div>
                <div>
                    <h3 class="font-bold text-slate-700">${fileName}</h3>
                    <p class="text-xs text-slate-400">${pdfDoc.numPages} pages</p>
                </div>
            `;
            section.appendChild(header);

            // Grid
            const grid = document.createElement('div');
            grid.className = "grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4";
            
            section.appendChild(grid);
            els.filesContainer.appendChild(section);

            // Render Pages
            for (let i = 1; i <= pdfDoc.numPages; i++) {
                const pageContainer = document.createElement('div');
                pageContainer.id = `page-${fileId}-${i}`;
                pageContainer.className = "page-card relative group cursor-pointer border-2 border-transparent rounded-xl overflow-hidden bg-slate-100 aspect-[3/4] flex items-center justify-center shadow-inner";
                pageContainer.onclick = (e) => {
                    // Prevent triggering if clicking preview button
                    if(e.target.closest('.preview-btn')) return;
                    toggleSelection(fileId, i);
                };

                // Canvas for Thumbnail
                const canvas = document.createElement('canvas');
                canvas.className = "w-full h-full object-contain pointer-events-none";
                pageContainer.appendChild(canvas);

                // Overlays
                const badge = document.createElement('div');
                badge.id = `badge-${fileId}-${i}`;
                badge.className = "selection-badge absolute top-2 left-2 bg-indigo-600 text-white font-bold w-8 h-8 rounded-full flex items-center justify-center shadow-lg z-10 text-sm";
                badge.innerText = ""; // Filled dynamically
                pageContainer.appendChild(badge);

                // Hover Actions
                const actions = document.createElement('div');
                actions.className = "hover-actions absolute top-2 right-2 opacity-0 transition-opacity duration-200 z-20";
                actions.innerHTML = `
                    <button class="preview-btn bg-white/90 hover:bg-white text-slate-700 p-2 rounded-full shadow-sm backdrop-blur-sm" onclick="previewPage('${fileId}', ${i})">
                        <span class="material-symbols-rounded text-lg block">fullscreen</span>
                    </button>
                `;
                pageContainer.appendChild(actions);

                grid.appendChild(pageContainer);

                // Async Render
                pdfDoc.getPage(i).then(page => {
                    const viewport = page.getViewport({ scale: 0.4 }); // Low res for thumbnail
                    canvas.height = viewport.height;
                    canvas.width = viewport.width;
                    
                    const renderContext = {
                        canvasContext: canvas.getContext('2d'),
                        viewport: viewport
                    };
                    page.render(renderContext);
                });
            }
        }

        // --- Interaction Logic ---

        function toggleSelection(fileId, pageIndex) {
            const existingIndex = state.selectedPages.findIndex(p => p.fileId === fileId && p.pageIndex === pageIndex);
            
            if (existingIndex > -1) {
                // Deselect: Remove and shift indices of others
                state.selectedPages.splice(existingIndex, 1);
            } else {
                // Select: Add to end
                state.selectedPages.push({ fileId, pageIndex });
            }
            
            updateSelectionUI();
        }

        function updateSelectionUI() {
            // Reset all visual states first (inefficient but robust for prototype)
            document.querySelectorAll('.page-card').forEach(el => {
                el.classList.remove('selected', 'ring-2', 'ring-indigo-500');
                el.querySelector('.selection-badge').innerText = '';
            });

            // Apply states based on order
            state.selectedPages.forEach((sel, index) => {
                const el = document.getElementById(`page-${sel.fileId}-${sel.pageIndex}`);
                if (el) {
                    el.classList.add('selected', 'ring-2', 'ring-indigo-500');
                    const badge = document.getElementById(`badge-${sel.fileId}-${sel.pageIndex}`);
                    badge.innerText = index + 1;
                    
                    // Tiny animation pop
                    badge.style.transform = 'scale(0.5)';
                    setTimeout(() => badge.style.transform = 'scale(1)', 50);
                }
            });

            els.selectionCount.innerText = state.selectedPages.length;
        }

        // --- Preview Logic ---

        async function previewPage(fileId, pageIndex) {
            const fileObj = state.files.find(f => f.id === fileId);
            if (!fileObj) return;

            els.previewModal.showModal();
            const page = await fileObj.pdfDoc.getPage(pageIndex);
            
            // High Quality Render
            const viewport = page.getViewport({ scale: 1.5 });
            const canvas = els.previewCanvas;
            const context = canvas.getContext('2d');
            
            canvas.height = viewport.height;
            canvas.width = viewport.width;
            
            await page.render({
                canvasContext: context,
                viewport: viewport
            }).promise;
        }

        function closePreview(e) {
            if (e.target === els.previewModal) {
                els.previewModal.close();
            }
        }

        // --- Merging Logic ---

        async function mergePages() {
            if (state.selectedPages.length === 0) {
                alert("Please select at least one page to merge.");
                return;
            }

            els.loadingView.classList.remove('hidden');

            try {
                // Create a new PDFDocument
                const mergedPdf = await PDFLib.PDFDocument.create();

                // Optimization: Group pages by source file to avoid loading the same source Doc multiple times repeatedly
                // actually, for correct order, we must iterate the selection list. 
                // But we can keep loaded PDFLib docs in a cache map.
                const loadedDocsCache = new Map();

                for (const sel of state.selectedPages) {
                    let sourcePdfDoc = loadedDocsCache.get(sel.fileId);

                    if (!sourcePdfDoc) {
                        const fileObj = state.files.find(f => f.id === sel.fileId);
                        // Load the source PDF into pdf-lib
                        sourcePdfDoc = await PDFLib.PDFDocument.load(fileObj.data);
                        loadedDocsCache.set(sel.fileId, sourcePdfDoc);
                    }

                    // Copy the page. Note: pdf-lib uses 0-based index, our UI uses 1-based
                    const [copiedPage] = await mergedPdf.copyPages(sourcePdfDoc, [sel.pageIndex - 1]);
                    mergedPdf.addPage(copiedPage);
                }

                state.mergedPdfBytes = await mergedPdf.save();
                
                // Transition to success
                els.loadingView.classList.add('hidden');
                els.editorView.classList.add('hidden');
                els.actionHeader.classList.add('hidden'); // Hide the merge button header
                els.successView.classList.remove('hidden');
                els.successView.classList.add('flex');

                setupDownload();

            } catch (error) {
                console.error(error);
                els.loadingView.classList.add('hidden');
                alert("An error occurred during merging. Check console.");
            }
        }

        function setupDownload() {
            els.downloadBtn.onclick = () => {
                const blob = new Blob([state.mergedPdfBytes], { type: 'application/pdf' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                
                let name = els.filenameInput.value.trim() || 'merged-document';
                if (!name.toLowerCase().endsWith('.pdf')) name += '.pdf';
                
                a.href = url;
                a.download = name;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            };
        }

        function resetApp() {
            location.reload();
        }

    </script>
    <script>
(() => {
  // Updated Storage Key for PDF Reorder & Merge
  const STORAGE_KEY = "docuwritepro_pdf_rm_guide_seen";
  if (localStorage.getItem(STORAGE_KEY)) return;

  const tips = [
    "Welcome to PDF Reorder & Merge! Start by clicking the 'Upload PDF' area to select the files you want to modify.",
    "Once uploaded, you will see a grid of all pages. Each page shows its source filename and original page number.",
    "To reorder your document, simply click and drag any page thumbnail to its new desired position in the sequence.",
    "Want to remove a page? Click the red 'Delete' icon (trash can) on the top right of any page thumbnail.",
    "If you need to view a page more closely before deciding its position, click the 'Zoom' icon on the thumbnail.",
    "You can add more pages at any time by clicking 'Add More PDFs' to combine multiple documents into one.",
    "The 'Rotate' feature allows you to fix any pages that were scanned upside down or sideways before merging.",
    "Before finishing, you can rename your final document using the 'Output Filename' field at the bottom.",
    "Click 'Merge & Save' to process your changes. The tool will compile your new PDF based exactly on your grid layout.",
    "After merging, use the 'Download' button to save the final PDF to your device, or 'Reset' to start a new project."
  ];

  let index = 0;
  let direction = 1;

  /* Container */
  const box = document.createElement("div");
  box.id = "dwp-tip-box";
  box.innerHTML = `
    <div class="dwp-progress">
      <div class="dwp-progress-bar"></div>
    </div>

    <div class="dwp-tip-wrapper">
      <div class="dwp-tip-text"></div>
    </div>

    <div class="dwp-actions">
      <button class="dwp-prev">Back</button>
      <button class="dwp-next">Next</button>
    </div>
  `;
  document.body.appendChild(box);

  const textEl = box.querySelector(".dwp-tip-text");
  const nextBtn = box.querySelector(".dwp-next");
  const prevBtn = box.querySelector(".dwp-prev");
  const progressBar = box.querySelector(".dwp-progress-bar");

  function updateTip(animate = true) {
    if (animate) {
      textEl.classList.remove("slide-in-left", "slide-in-right");
      void textEl.offsetWidth;
      textEl.classList.add(direction > 0 ? "slide-in-right" : "slide-in-left");
    }

    textEl.textContent = tips[index];
    progressBar.style.width = `${((index + 1) / tips.length) * 100}%`;

    prevBtn.style.visibility = index === 0 ? "hidden" : "visible";
    nextBtn.textContent = index === tips.length - 1 ? "Got it" : "Next";
  }

  nextBtn.onclick = () => {
    if (index === tips.length - 1) {
      localStorage.setItem(STORAGE_KEY, "true");
      box.classList.add("fade-out");
      setTimeout(() => box.remove(), 300);
    } else {
      direction = 1;
      index++;
      updateTip();
    }
  };

  prevBtn.onclick = () => {
    if (index > 0) {
      direction = -1;
      index--;
      updateTip();
    }
  };

  setTimeout(() => {
    box.classList.add("show");
    updateTip(false);
  }, 1000);

  /* Styles */
  const style = document.createElement("style");
  style.textContent = `
    #dwp-tip-box {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(10px);
      width: 340px;
      background: #1e293b; /* Slate-800 to contrast with the PDF tool's clean UI */
      color: #f1f5f9;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 20px 25px -5px rgba(0,0,0,0.2), 0 10px 10px -5px rgba(0,0,0,0.1);
      font-family: 'Inter', system-ui, sans-serif;
      z-index: 10000;
      opacity: 0;
      transition: opacity .3s ease, transform .3s ease;
      border: 1px solid rgba(255,255,255,0.1);
    }

    #dwp-tip-box.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    #dwp-tip-box.fade-out {
      opacity: 0;
      transform: translateX(-50%) translateY(10px);
    }

    .dwp-progress {
      height: 4px;
      background: rgba(255,255,255,0.1);
      border-radius: 99px;
      overflow: hidden;
      margin-bottom: 14px;
    }

    .dwp-progress-bar {
      height: 100%;
      width: 0%;
      background: #3b82f6; /* Blue-500 */
      transition: width .35s ease;
    }

    .dwp-tip-wrapper {
      overflow: hidden;
      min-height: 60px;
      display: flex;
      align-items: center;
    }

    .dwp-tip-text {
      font-size: 14px;
      line-height: 1.6;
      font-weight: 400;
    }

    .slide-in-right {
      animation: slideRight .25s ease;
    }

    .slide-in-left {
      animation: slideLeft .25s ease;
    }

    @keyframes slideRight {
      from { opacity: 0; transform: translateX(15px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes slideLeft {
      from { opacity: 0; transform: translateX(-15px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .dwp-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 16px;
      gap: 10px;
    }

    .dwp-actions button {
      border: none;
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      flex: 1;
      transition: all 0.2s;
    }

    .dwp-prev {
      background: rgba(255,255,255,0.05);
      color: #cbd5e1;
    }

    .dwp-prev:hover {
      background: rgba(255,255,255,0.1);
    }

    .dwp-next {
      background: #3b82f6;
      color: white;
    }

    .dwp-next:hover {
      background: #2563eb;
    }
  `;
  document.head.appendChild(style);
})();
    </script>
</body>
</html>
